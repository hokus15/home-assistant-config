language: python
python:
  - "3.8"
before_install:
  - mv config/travis_secrets.yaml config/secrets.yaml
  - sudo mkdir -p /share/camera
  - sed -i '/stream:/d' ./config/configuration.yaml
  - sudo apt-get install -y libudev-dev
  - HA_VERSION=$(<config/.HA_VERSION)
install:
  - pip3 install six==1.12.0
  - ls /home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/
  - ls /home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/six-1.12.0.dist-info/
  - mv /home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/six-1.12.0.dist-info/METADATA.json /home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/six-1.12.0.dist-info/METADATA
  - pip3 install homeassistant==${HA_VERSION}
script:
  - hass -c config --script check_config
